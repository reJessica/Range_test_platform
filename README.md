# 2024挑战杯揭榜挂帅——杭州安恒“基于信创环境的网络安全测试验证靶场平台”比赛方案

## 题目介绍

党的十八大以来，以习近平同志为核心的党中央高度重视网络安全工作，特别在目前日趋复杂的背景下，深刻认识和有力防范网络安全风险，切实维护网络空间安全，已成为事关全局的重大课题。习近平总书记对此多次发表重要讲话、作出重要指示批示，指出“网络安全为人民，网络安全靠人民，维护网络安全是全社会共同责任，需要政府、企业、社会组织、广大网民共同参与，共筑网络安全防线”。

在经济社会日常运行中，为避免因网络攻防演练和安全测试对业务系统造成的负面影响，要求基于国产操作系统等信创环境，利用虚拟仿真技术搭建网络安全测试验证环境，实现安全配置核查、安全策略评估、网络安全设备接入验证等风险评估分析功能。主要包括：

+ 实现对目标网络环境的安全测试验证功能，包括探测网络目标场景的漏洞数量、漏洞类型、漏洞危险等级等内容，并对环境脆弱点进行整体评估，得出分析评估报告。
+ 实现对各类设备防护成效的测试验证功能，通过对安全设备部署前后扫描渗透结果的横向对比，得出分析评估报告。

## 项目简介

在当前网络空间安全行业中，企业面临着以下主要挑战：漏洞管理复杂且难以修复，易被攻击者利用；高级持续性威胁（APT）隐蔽且持久，难以通过传统安全措施防御；物联网设备数量庞大且分布广泛，缺乏统一的安全管理与监控手段。

本系统作为一个概念型平台，融合了多样化的工具，旨在为企业提供全面的网络安全测试和验证靶场。然而，正如所有创新型系统一样，本系统目前还存在一些不足之处，需要通过不断的学习和优化来进一步提升其功能和效能。欢迎指出问题，star项目~

## 系统说明

#### 登录界面![屏幕截图 2024-07-31 201648](C:/Users/21936/Pictures/Screenshots/屏幕截图 2024-07-31 201648.png)

#### 功能导航栏

<img src="C:/Users/21936/Pictures/Screenshots/屏幕截图 2024-07-31 201946.png" alt="屏幕截图 2024-07-31 201946" style="zoom:50%;" />

### 可视化大屏

“网盾探隅”的数据可视化主页提供了一个清晰、直观的界面，用于展示网络安全扫描结果、网络拓扑和相关分析数据。主页整合了多种可视化工具和功能，帮助用户快速了解和管理网络安全状况。

![屏幕截图 2024-07-31 212520](C:/Users/21936/Pictures/Screenshots/屏幕截图 2024-07-31 212520.png)

#### 接入网络安全领域gpt

<img src="C:/Users/21936/Pictures/Screenshots/屏幕截图 2024-07-31 211329.png" alt="屏幕截图 2024-07-31 211329" style="zoom:50%;" />

#### 基本安全测试

初步的网络扫描和评估识别常见的安全漏洞和配置问题。检查弱密码、开放端口、未更新的软件等基础安全风险。

![image-20240904111126298](C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111126298.png)

![image-20240904111132198](C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111132198.png)

#### 进阶安全测试

深入的安全分析高级漏洞扫描、渗透测试模拟、以及复杂威胁检测。评估潜在的高级攻击向量，如零日漏洞、SQL注入、跨站脚本攻击等。深入的安全分析高级漏洞扫描、渗透测试模拟、以及复杂威胁检测。评估潜在的高级攻击向量，如零日漏洞、SQL注入、跨站脚本攻击等。用户进行全面的安全事件筛选查询，以便于及时识别和处理可能的安全威胁。帮助用户高效识别、分析和处理安全威胁。

<img src="C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111149576.png" alt="image-20240904111149576" style="zoom:50%;" />

<img src="C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111159097.png" alt="image-20240904111159097" style="zoom:50%;" />

<img src="C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111208418.png" alt="image-20240904111208418" style="zoom:50%;" />

<img src="C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111224382.png" alt="image-20240904111224382" style="zoom:50%;" />

<img src="C:/Users/21936/AppData/Roaming/Typora/typora-user-images/image-20240904111234915.png" alt="image-20240904111234915" style="zoom:50%;" />







# 网盾探隅——智能靶场漏洞测试平台部署文档

## 项目情况

+ 开发工具：Visual Studio Code
+ 插件：
	- EditorConfig for VS Code
	- ESLint
	- Stylelint
+ 编辑工具：node 
+ 包管理工具：Yarn 
+ 运行环境：
	- 推荐 Chrome 浏览器，其他现代浏览器不保证完全兼容
	- 屏幕分辨率 >= 1024
+ 前端采用Vue、Element UI。

+ 后端采用Spring Boot、Spring Security、Redis & Jwt。
+ 项目构建：Maven
+ mysql，redis服务器
+ 语言：C，C++，Java，JavaScript，Less，Vue

## 程序清单

基本环境依赖

| 安装包                            | 用途                        |
| --------------------------------- | --------------------------- |
| cgicc-lib-3.2.16-1.el7.x86_64.tar | 用于创建CGI应用程序         |
| cppdb-lib-0.3.1-1.el7.x86_64.tar  | 一个C++的轻量级数据库连接库 |
| protobuf-3.8.0-1.el7.x86_64.tar   | 用于序列化结构化数据的机制  |
| db.server.v1.1.231123.tar         | 数据库文件                  |

程序部署包

| 安装包                                    | 用途                                                   |
| ----------------------------------------- | ------------------------------------------------------ |
| Agent.v1.1.0.231124.tar                   | 监控，管理代理程序                                     |
| lyprobe-release-v1.0.1.tar                | 探测监控工具，探针                                     |
| pf_ring-lib-7.4.0-957.el7.x86_64.E5v2.tar | 高性能网络包捕获库，通常用于网络监控和分析。           |
| Server.v1.1.1.240101.tar                  | 一个服务器应用程序或服务软件包                         |
| tensorflow-2.0.4-1.el7.x86_64.tar         | 一个开源的机器学习框架，广泛用于深度学习和人工智能应用 |
| webui.v1.1.0.tar                          | Web用户界面应用程序                                    |



## 程序部署

1.将 localyumsource.tar.gz 解压至 /root 目录下，执行 all_env.sh 脚本，离线安装依赖环境。

2.执行 agent_deploy_relese.sh 脚本，完成探针与分析节点的部署。

3.执行 server_deploy_release.sh 脚本，完成管理节点与可视化界面的部署。

4.初始化数据库，根据提示多次手动设置密码，输入密码。注意密码输入保持一致。

5.在/etc/rc.local 文件中，通过-i参数指定所监听的网卡（默认写ens224），根据网卡信息自主更改此参数。执行该脚本，运行探针lyproe 与接收程序 nfcapd。

6.启动探针监听网卡，接入回放的流量或真实流量（提供模拟数据包压缩包pcap_file.tar），重放文件即可。

7.编辑src/main/ resources目录下的application-druid.yml 文件，修改数据库地址账号信息。

8.执行challenge2024.sql文件获取数据库数据。

9.启动RuoYiApplication.java，打开浏览器，输入：http://localhost:8080/captchaImage，若能正确显示返回信息，搭建后台成功。

10.启动前端展示界面

```
cd ruoyi-ui
npm install 
npm run dev
```

打开浏览器，输入：http://localhost:80 （默认账户 admin/admin123）

若能正确展示登录页面，并能成功登录，菜单及页面展示正常，则表明环境搭建成功



### 4.验证

  可以从以下步骤，进行系统数据流转测试验证：

1.验证接收器能够正常接收数据： `/data/flow/3/` 目录下是否存在 `nfcapd` 文件，且单个文件大小大于276字节。

2.分析引擎正常产出数据： `/Agent/data/db/` 目录下是否存在 以日期命名的目录，且日期目录中不为空。

3.管理端、Web可视化页面正常显示数据：WEB端访问正常，检测到测试数据中存在的告警事件。

**注意:**  系统为流水线式作业，每个节点间数据流转存在约5分钟的时间差，从接入流量至web端监测到告警，存在15分钟左右的延迟。

**注意:**  系统主页面仅展示告警信息，不对正常流量进行展示。可通过搜索框搜索指定的IP、端口、域名，查询目标的全部会话。

**注意：**若出现页面无法显示的问题，可以在系统管理-菜单管理-中设置权限以及路由路径（本质是修改数据库数据），由此可进行相关访问。

**注意**：启动本地开发环境报错 `error:0308010C:digital envelope routines::unsupported`。则在 `packages/std/package.json`文件的start命中添加参数 `--openssl-legacy-provider`，修改为 `"start": "cross-env REACT_APP_ENV=dev react-app-rewired --openssl-legacy-provider start"`。







